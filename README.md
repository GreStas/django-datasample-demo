# Инструмент разработчика для выгрузки из БД Django по шаблонным SQL
(django-datasample-demo)

## Описание идеи
**Цель** - отделить разработку SQL-запроса от разработки отчётов на их основе. 

Это позволит персоналу сопровождения создавать множестов конфгураций 
выборок под запросы клиента на базе одного шаблона выборки данных.  

Разработчик создаёт шаблон выборки данных (datasample) который содержит:
1. базовый SQL-запрос
2. описание свойств полей, которые возвращает SQL-запрос
3. описание параметров к SQL-запросу   

На стороне Front-End можно получить описание шабона выборок и 
вызвать его на выполение с переданными:
1. значениями параметров
2. опциями по выборке данных на основе описания полей базового запроса:
  * список полей с указанием фвнкции их обработки, 
  например для калькулируемых - это `sum`, `min`, `max`, `avg`
  * список полей для группировки (`group by`)
  * список полей для сортировки (`order by`)

Для удобства отладки разработан WEB-интерфейс в приложении datasamples.
   

## Техническое описание

### datasample
Python package

### datasamples
Django application для разработчика

### example
Клиентское Django-приложение

### Утилиты и конфигурации
_aliases_ - использование алиасов команд в Linux 
_docker-compose.yml_ - конфигурация докер-контейнера для БД
_dump_data.sh_ - выгрузка данных из БД
_loaddata.sh_ - загрузка данных в БД
_Pipfile_, _Pipfile.lock_ - конфигурация pipenv
_README.md_ - этот файл
_rm_migrations.sh_ - удаление файлов миграций, когда надо пересоздать БД с нуля
_rm_pycache.sh_ - удаление кэша Python, например перед переносом на другой компьютер или архивации 
_sqlrepos_ - каталог Django-проекта

## Использование
### Пользователи
Для тестирования достаточно пользователя admin. 
Остальные пользователи нужны как персонал для приложения example.

username | password
---|---
admin | zaq12wsx
boss, manager1, manager2, seller1, seller2 | ZAQ!2wsx

### Тестовые данные

Загружаются скриптом _loaddata.sh_ из example/tests/example_data.json

Пример options - в файле example/tests/example_schema1.json